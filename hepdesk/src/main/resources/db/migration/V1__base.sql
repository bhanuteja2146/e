create table contact_details (contact_detail_id  bigserial not null, created_at timestamp, updated_at timestamp, cell_phone varchar(255), email varchar(255), fax varchar(255), home_phone varchar(255), is_email BOOLEAN DEFAULT true, pager varchar(255), reason varchar(255), work_phone varchar(255), primary key (contact_detail_id));
create table cs_black_listed_tokens (token_id  bigserial not null, created_at timestamp, updated_at timestamp, token varchar(255) not null, primary key (token_id));
create table emr_unlock_audit (id  bigserial not null, created_at timestamp, updated_at timestamp, lock_date date, lock_reason varchar(255), un_lock_date date, un_locked_by varchar(255), user_name varchar(255), primary key (id));
create table facility (id int8 not null, created_at timestamp, updated_at timestamp, address1 varchar(255), address2 varchar(255), alternate_contact varchar(255), city varchar(255), code varchar(255), country varchar(255), email varchar(255), ext varchar(255), facility_color varchar(255), facility_image_url varchar(255), fax varchar(255), is_primary_practice boolean, name varchar(255), phone varchar(255), record_state int4, start_date date, state varchar(255), status int4, type varchar(255), zip varchar(255), primary key (id));
create table log_in_settings_log (id  bigserial not null, created_at timestamp, updated_at timestamp, facility_id int8, lock_date timestamp, lock_reason varchar(255), lock_user_id int8, old_passwrd varchar(255), record_state int4, unlock_date timestamp, unlocking_user_id int8, user_id int8, primary key (id));
create table log_in_settings (id  bigserial not null, created_at timestamp, updated_at timestamp, facility_id int8, facility_name varchar(255), limit_last_application_used int8, limit_last_pass_used int8, limit_login_attempt int8, limit_session_timeout int8, pass_expire_alert_days int8, pass_expire_days int8, pass_max_length int8, pass_min_length int8, record_state int4, primary key (id));
create table permissions_provider_facility_mapping (id  bigserial not null, created_by varchar(255), facility_id int8 not null, provider_id int8 not null, resource boolean not null, record_status varchar(255), user_name varchar(255) not null, primary key (id));
create table primary_contact_details (primary_contact_detail_id  bigserial not null, created_at timestamp, updated_at timestamp, address1 varchar(255), address2 varchar(255), city varchar(255), country varchar(255), directions varchar(255), region varchar(255), state varchar(255), zip varchar(255), primary key (primary_contact_detail_id));
create table staff (staff_id  bigserial not null, created_at timestamp, updated_at timestamp, billing_facility varchar(255), city varchar(255), deactive_status int4, dea_active_date timestamp, dea_number varchar(255), dea_term_date timestamp, default_screen varchar(255) default 'Quick links', degrees varchar(255), dob timestamp, emcd_provider_id varchar(255), employee_id varchar(255), emr_mobile_status varchar(255), eps_status varchar(255), erx_status varchar(255), first_name varchar(255), global_status boolean default true, is_care_manager boolean, language_spoken varchar(255), last_name varchar(255), license_active_date timestamp, license_term_date timestamp, medicaid_grp_number varchar(255), medicare_grp_number varchar(255), middle_name varchar(255), network_affiliation varchar(255), npi varchar(255), number__of_slot integer default 4, organization_type varchar(255), p2p_status varchar(255), photo_path varchar(255), prefix varchar(255), prescription_auth_number varchar(255), primary_service_location varchar(255), print_name varchar(255), provider_group_npi int8, provider_initials varchar(255), provider_or_non_provider boolean not null, provider_site_id varchar(255), provider_tax_id varchar(255), record_state int4, resident varchar(255), resource boolean, sex varchar(255), sign_photo_path varchar(255), speciality_license varchar(255), specility varchar(255), ssn varchar(255), state_license varchar(255), suffix varchar(255), tax_id_suffix varchar(255), tax_id_type varchar(255), taxonomy_code varchar(255), upin varchar(255), user_profile_id int8, user_name varchar(255), primary_contact_details_id int8, contact_details_id int8, facility_model_facility_id int8, primary key (staff_id));
create table ticket (id  bigserial not null, created_at timestamp, updated_at timestamp, created_by varchar(255), customer_id int8, mail_box_type int4, record_state int4, sent_by varchar(255), sent_date date, subject varchar(255), primary key (id));
create table ticket_content (id  bigserial not null, created_at timestamp, updated_at timestamp, content varchar(255), created_by varchar(255), created_date date, customer_id varchar(255), record_state int4, template boolean, template_name varchar(255), primary key (id));
create table ticket_content_mapping (patient_portal_msg_model_id int8 not null, patient_portal_msg_content_model_id int8 not null);
create table ticket_response (id  bigserial not null, created_at timestamp, updated_at timestamp, created_by varchar(255), customer_id varchar(255), mail_box_type int4, record_state int4, sent_by varchar(255), sent_date date, subject varchar(255), primary key (id));
create table ticket_response_content (id  bigserial not null, created_at timestamp, updated_at timestamp, content varchar(255), created_by varchar(255), created_date date, customer_id varchar(255), record_state int4, template boolean, template_name varchar(255), primary key (id));
create table ticket_response_content_mapping (portal_message_model_id int8 not null, portal_message_content_model_id int8 not null);
create table ticket_model_attachment_url (ticket_model_id int8 not null, attachment_url varchar(255));
create table ticket_response_model_attachment_url (ticket_response_model_id int8 not null, attachment_url varchar(255));
create table user_profile (id  bigserial not null, created_at timestamp, updated_at timestamp, patient_active boolean, dob timestamp, email_id varchar(255), facility_id int8, facility_name varchar(255), first_name varchar(255), last_access_application timestamp, last_name varchar(255), limit_login_attempt int8, lock_date varchar(255), lock_reason varchar(255), lock_status varchar(255), mobile varchar(255), otp int8, otp_created_time timestamp, password_change_date timestamp, portal_patient_id int8, provider_id int8, provider_type varchar(255), passwrd varchar(255), user_status varchar(255), un_lock_date varchar(255), un_locked_by varchar(255), user_name varchar(255), user_type varchar(255), primary key (id));
alter table if exists user_profile drop constraint if exists UK_l6wgfhqrwuy4m1o7bs81ivg6x;
alter table if exists user_profile add constraint UK_l6wgfhqrwuy4m1o7bs81ivg6x unique (user_name);
alter table if exists staff add constraint FKf74cpeqieqryew4yo3eh1rshc foreign key (primary_contact_details_id) references primary_contact_details;
alter table if exists staff add constraint FKd4jde5xipxs38pax6f2paltnf foreign key (contact_details_id) references contact_details;
alter table if exists staff add constraint FK50pn5s6ioejahdek6j77uy4iy foreign key (facility_model_facility_id) references facility;
alter table if exists ticket_content_mapping add constraint FK99fq7lrhgvfl7jkca3rajkd34 foreign key (patient_portal_msg_content_model_id) references ticket_content;
alter table if exists ticket_content_mapping add constraint FK2wyh6la44hemgwodqefw8o37 foreign key (patient_portal_msg_model_id) references ticket;
alter table if exists ticket_response_content_mapping add constraint FKektvupcx7kpdrvrhbqweu1a6 foreign key (portal_message_content_model_id) references ticket_response_content;
alter table if exists ticket_response_content_mapping add constraint FKdvh2m5rufk2uvow4tmbq2762v foreign key (portal_message_model_id) references ticket_response;
alter table if exists ticket_model_attachment_url add constraint FKo8rxxo4uejwhh1vpf9jd8seru foreign key (ticket_model_id) references ticket;
alter table if exists ticket_response_model_attachment_url add constraint FKcd5a1vwjxkexuwuhtaox47e0b foreign key (ticket_response_model_id) references ticket_response	